<!DOCTYPE html>

<html lang="en">

<head>

Â  <meta charset="UTF-8" />

Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

Â  <title>Real-time Weather Dashboard</title>

Â  <script src="https://cdn.tailwindcss.com"></script>

Â  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

Â  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

Â  <style>

Â  Â  :root{

Â  Â  Â  --glass: rgba(255,255,255,.18);

Â  Â  Â  --blur: 10px;

Â  Â  }

Â  Â  body{

Â  Â  Â  font-family: 'Kanit', sans-serif;

Â  Â  Â  transition: background 700ms ease, color 300ms ease;

Â  Â  Â  min-height: 100vh;

Â  Â  Â  overflow-x: hidden;

Â  Â  Â  position: relative;

Â  Â  Â  color: #fff;

Â  Â  }

Â  Â  /* ====== BACKGROUND THEMES ====== */

Â  Â  /* 1) Sunny: à¸Šà¸¡à¸à¸¹à¸à¸²à¸ªà¹€à¸—à¸¥ + à¹€à¸«à¸¥à¸·à¸­à¸‡à¸ªà¸”à¹ƒà¸ª */

Â  Â  .bg-sunny{

Â  Â  Â  background: radial-gradient(1200px 800px at 80% -10%, #FFE781 0%, rgba(255,231,129,0) 60%),

Â  Â  Â  Â  Â  Â  Â  Â  Â  linear-gradient(135deg, #ffbdd4 0%, #ffd6a5 45%, #fff1b8 100%);

Â  Â  }

Â  Â  /* 2) Rain: à¸Ÿà¹‰à¸²à¹€à¸‚à¹‰à¸¡ + à¸à¸™à¹‚à¸›à¸£à¸¢ */

Â  Â  .bg-rain{

Â  Â  Â  background: linear-gradient(160deg, #1a2a6c 0%, #1e3c72 50%, #2a5298 100%);

Â  Â  }

Â  Â  /* 3) Cloudy: à¹€à¸—à¸²-à¸¡à¹ˆà¸§à¸‡à¸«à¸¡à¹ˆà¸™ */

Â  Â  .bg-cloudy{

Â  Â  Â  background: linear-gradient(120deg, #4b4b6b 0%, #6b5b73 50%, #7a6f86 100%);

Â  Â  }

Â  Â  /* 4) Night: à¸¡à¹ˆà¸§à¸‡à¸™à¹‰à¸³à¹€à¸‡à¸´à¸™ + à¸”à¸²à¸§à¸£à¸°à¸¢à¸´à¸š */

Â  Â  .bg-night{

Â  Â  Â  background: radial-gradient(800px 600px at 70% -20%, rgba(148,187,233,.35) 0%, rgba(148,187,233,0) 60%),

Â  Â  Â  Â  Â  Â  Â  Â  Â  linear-gradient(180deg, #0b1026 0%, #121a3b 60%, #1b2358 100%);

Â  Â  }

Â  Â  /* ====== LAYERS CONTAINER ====== */

Â  Â  .fx-layer{

Â  Â  Â  position: fixed;

Â  Â  Â  inset: 0;

Â  Â  Â  pointer-events: none;

Â  Â  Â  z-index: -1;

Â  Â  Â  overflow: hidden;

Â  Â  }

Â  Â  /* ====== CLOUDS (à¸«à¸¥à¸²à¸¢à¸Šà¸±à¹‰à¸™, à¸¥à¸­à¸¢à¸Šà¹‰à¸²à¹†) ====== */

Â  Â  .clouds{ opacity: .85; filter: drop-shadow(0 8px 12px rgba(0,0,0,.25)); }

Â  Â  .cloud{

Â  Â  Â  position: absolute;

Â  Â  Â  width: var(--w, 220px);

Â  Â  Â  height: var(--h, 80px);

Â  Â  Â  background: rgba(255,255,255,.9);

Â  Â  Â  border-radius: 50px;

Â  Â  Â  animation: drift var(--speed, 80s) linear infinite;

Â  Â  }

Â  Â  .cloud:before, .cloud:after{

Â  Â  Â  content:"";

Â  Â  Â  position:absolute;

Â  Â  Â  background: rgba(255,255,255,.95);

Â  Â  Â  width:60%;

Â  Â  Â  height:120%;

Â  Â  Â  border-radius: 50%;

Â  Â  Â  top:-30%;

Â  Â  Â  left:10%;

Â  Â  Â  box-shadow: 80px 20px 0 10px rgba(255,255,255,.95);

Â  Â  }

Â  Â  @keyframes drift{

Â  Â  Â  0%{ transform: translateX(-30vw) translateY(var(--y,0)); }

Â  Â  Â  100%{ transform: translateX(130vw) translateY(var(--y,0)); }

Â  Â  }

Â  Â  /* parallax layers */

Â  Â  .layer-1 .cloud{ --speed: 90s; opacity:.9; }

Â  Â  .layer-2 .cloud{ --speed: 70s; opacity:.8; }

Â  Â  .layer-3 .cloud{ --speed: 55s; opacity:.75; }

Â  Â  /* ====== RAIN (à¸à¸²à¸£à¹Œà¸—à¸´à¹€à¸„à¸´à¸¥à¹€à¸ªà¹‰à¸™à¹†) ====== */

Â  Â  .rain{

Â  Â  Â  position: fixed; inset:0;

Â  Â  Â  background: repeating-linear-gradient(

Â  Â  Â  Â  to bottom,

Â  Â  Â  Â  rgba(255,255,255,.0) 0px,

Â  Â  Â  Â  rgba(255,255,255,.0) 10px,

Â  Â  Â  Â  rgba(255,255,255,.25) 11px,

Â  Â  Â  Â  rgba(255,255,255,.25) 12px

Â  Â  Â  );

Â  Â  Â  mask-image: linear-gradient(to bottom, rgba(0,0,0,0) 0%, #000 10%, #000 90%, rgba(0,0,0,0) 100%);

Â  Â  Â  animation: rainShift 700ms linear infinite;

Â  Â  Â  opacity: .55;

Â  Â  }

Â  Â  @keyframes rainShift{

Â  Â  Â  0%{ background-position: 0 0; }

Â  Â  Â  100%{ background-position: 0 40px; }

Â  Â  }

Â  Â  /* Extra: raindrops streaks */

Â  Â  .raindrop{

Â  Â  Â  position:absolute;

Â  Â  Â  width:1px; height:60px;

Â  Â  Â  background: linear-gradient(to bottom, rgba(255,255,255,.0), rgba(255,255,255,.7));

Â  Â  Â  animation: fall var(--t, 1.2s) linear infinite;

Â  Â  Â  transform: translateZ(0);

Â  Â  Â  will-change: transform;

Â  Â  }

Â  Â  @keyframes fall{

Â  Â  Â  0%{ transform: translateY(-80px); opacity: 0; }

Â  Â  Â  10%{ opacity: 1; }

Â  Â  Â  100%{ transform: translateY(110vh); opacity: .2; }

Â  Â  }

Â  Â  /* ====== STARS (à¸à¸¥à¸²à¸‡à¸„à¸·à¸™ à¸”à¸²à¸§à¸£à¸°à¸¢à¸´à¸š) ====== */

Â  Â  .stars{

Â  Â  Â  position: fixed; inset:0;

Â  Â  Â  overflow:hidden;

Â  Â  }

Â  Â  .star{

Â  Â  Â  position:absolute;

Â  Â  Â  width:2px; height:2px;

Â  Â  Â  border-radius:50%;

Â  Â  Â  background: white;

Â  Â  Â  opacity:.9;

Â  Â  Â  animation: twinkle var(--tw, 2.5s) ease-in-out infinite alternate;

Â  Â  Â  box-shadow: 0 0 6px rgba(255,255,255,.9);

Â  Â  }

Â  Â  @keyframes twinkle{

Â  Â  Â  0%{ opacity:.3; transform: scale(1); }

Â  Â  Â  100%{ opacity:1; transform: scale(1.6); }

Â  Â  }

Â  Â  /* ====== GLASS CARD ====== */

Â  Â  .card{

Â  Â  Â  backdrop-filter: blur(var(--blur));

Â  Â  Â  background-color: var(--glass);

Â  Â  Â  border-radius: 1.5rem;

Â  Â  Â  padding: 1.25rem;

Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,.2), inset 0 0 0 1px rgba(255,255,255,.12);

Â  Â  }

Â  Â  /* ====== FANTASY GLOW (à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´) ====== */

Â  Â  .temp-glow{

Â  Â  Â  text-shadow:

Â  Â  Â  Â  0 0 12px rgba(255,255,255,.8),

Â  Â  Â  Â  0 0 28px rgba(255,255,255,.5),

Â  Â  Â  Â  0 0 54px rgba(255,255,200,.35);

Â  Â  Â  letter-spacing: 1px;

Â  Â  }

Â  Â  /* ====== ICON GLOW ====== */

Â  Â  .icon-glow{

Â  Â  Â  filter: drop-shadow(0 0 10px rgba(255,255,255,.6));

Â  Â  }

Â  Â  /* hide default canvas/map placeholder from old version */

Â  Â  #canvas-container, #map-placeholder{ display:none; }

Â  </style>

</head>

<body class="bg-sunny text-white p-4 flex flex-col justify-center items-center">

Â  <div class="fx-layer stars" id="starsLayer" style="display:none;"></div>

Â  <div class="fx-layer clouds" id="cloudsLayer" style="display:none;">

Â  Â  <div class="layer-1"></div>

Â  Â  <div class="layer-2"></div>

Â  Â  <div class="layer-3"></div>

Â  </div>

Â  <div class="fx-layer rain" id="rainLayer" style="display:none;"></div>

Â  <div class="fx-layer" id="rainDropsLayer" style="display:none;"></div>

Â  <div class="max-w-xl w-full mx-auto space-y-6 relative z-10">

Â  Â  <div class="flex flex-col items-center text-center pt-8 pb-4">

Â  Â  Â  <div class="flex items-center gap-3">

Â  Â  Â  Â  <span id="main-icon" class="text-5xl icon-glow">â€”</span>

Â  Â  Â  Â  <h1 class="text-3xl md:text-4xl font-semibold mt-2">Bangkok, Thailand</h1>

Â  Â  Â  </div>

Â  Â  Â  <div class="flex items-center mt-3">

Â  Â  Â  Â  <span class="text-7xl md:text-8xl font-extralight temp-glow leading-none" id="temp-value">--Â°C</span>

Â  Â  Â  </div>

Â  Â  Â  <p class="text-2xl opacity-95 mt-1 capitalize" id="weather-description">...</p>

Â  Â  Â  <div class="flex space-x-4 mt-2 opacity-90">

Â  Â  Â  Â  <p class="text-lg"><span id="temp-max-value">--</span>Â°C (Max)</p>

Â  Â  Â  Â  <p class="text-lg"><span id="temp-min-value">--</span>Â°C (Min)</p>

Â  Â  Â  </div>

Â  Â  </div>

Â  Â  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸ’§ Humidity</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1" id="humidity-value">--%</p>

Â  Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸŒ¡ï¸ Pressure</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1"><span id="pressure-value">--</span> hPa</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸŒ¬ï¸ Wind Speed</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1"><span id="wind-speed-value">--</span> m/s</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸ§­ Wind Direction</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1"><span id="wind-direction-value">--</span>Â°</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">â˜€ï¸ UV Index</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1" id="uv-index-value">--</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸŒ¡ï¸ Feels Like</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1" id="feels-like-value">--Â°C</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸŒ… Sunrise</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1" id="sunrise-value">--</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸŒ‡ Sunset</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1" id="sunset-value">--</p>

Â  Â  Â  </div>

Â  Â  Â  <div class="card flex flex-col items-center text-center">

Â  Â  Â  Â  <p class="text-sm opacity-80">ğŸ‘ï¸ Visibility</p>

Â  Â  Â  Â  <p class="text-2xl font-medium mt-1"><span id="visibility-value">--</span> km</p>

Â  Â  Â  </div>

Â  Â  </div>

Â  Â  <div class="card p-4 shadow-lg">

Â  Â  Â  <h2 class="text-xl font-semibold mb-3">Hourly Forecast</h2>

Â  Â  Â  <div id="hourly-forecast-container" class="flex overflow-x-auto space-x-4 pb-2"></div>

Â  Â  </div>

Â  Â  <div class="card p-4 shadow-lg">

Â  Â  Â  <h2 class="text-xl font-semibold mb-3">7-Day Forecast</h2>

Â  Â  Â  <div id="daily-forecast-container" class="space-y-2"></div>

Â  Â  </div>

Â  </div>

Â  <footer class="mt-8 text-center text-sm opacity-70">

Â  Â  <div class="card p-4 shadow-lg">

Â  Â  Â  <p>Create By Suwannarat & Siriwan</p>

Â  Â  </div>

Â  </footer>

Â  <script>

Â  Â  const API_KEY = 'ccffd32214c3b336e740cd6b4c9cf5d0';

Â  Â  const lat = '13.7563';

Â  Â  const lon = '100.5018';

Â  Â  const cloudsLayer = document.getElementById('cloudsLayer');

Â  Â  const rainLayer = document.getElementById('rainLayer');

Â  Â  const rainDropsLayer = document.getElementById('rainDropsLayer');

Â  Â  const starsLayer = document.getElementById('starsLayer');

Â  Â  const mainIconEl = document.getElementById('main-icon');

Â  Â  /* ========== UTILITIES ========== */

Â  Â  function getWeatherIcon(id){

Â  Â  Â  if(id >=200 && id<300) return 'â›ˆï¸';

Â  Â  Â  if(id >=300 && id<400) return 'ğŸŒ§ï¸';

Â  Â  Â  if(id >=500 && id<600) return 'ğŸŒ§ï¸';

Â  Â  Â  if(id >=600 && id<700) return 'â„ï¸';

Â  Â  Â  if(id >=700 && id<800) return 'ğŸŒ«ï¸';

Â  Â  Â  if(id === 800) return 'â˜€ï¸';

Â  Â  Â  if(id > 800 && id < 900) return 'â˜ï¸';

Â  Â  Â  return 'â“';

Â  Â  }

Â  Â  function classifyWeather(id){

Â  Â  Â  if(id >=200 && id<600) return 'rain';

Â  Â  Â  if(id === 800) return 'sunny';

Â  Â  Â  if(id > 800 && id < 900) return 'cloudy';

Â  Â  Â  // haze/mist -> cloudy mood

Â  Â  Â  if(id >=700 && id<800) return 'cloudy';

Â  Â  Â  return 'sunny';

Â  Â  }

Â  Â  function isNightBySys(sys){

Â  Â  Â  const now = Math.floor(Date.now()/1000);

Â  Â  Â  return !(now > sys.sunrise && now < sys.sunset);

Â  Â  }

Â  Â  function clearLayers(){

Â  Â  Â  cloudsLayer.style.display = 'none';

Â  Â  Â  rainLayer.style.display = 'none';

Â  Â  Â  rainDropsLayer.style.display = 'none';

Â  Â  Â  starsLayer.style.display = 'none';

Â  Â  Â  // remove generated nodes

Â  Â  Â  [...cloudsLayer.querySelectorAll('.cloud')].forEach(n=>n.remove());

Â  Â  Â  [...rainDropsLayer.querySelectorAll('.raindrop')].forEach(n=>n.remove());

Â  Â  Â  [...starsLayer.querySelectorAll('.star')].forEach(n=>n.remove());

Â  Â  }

Â  Â  function setBodyTheme(theme, night=false){

Â  Â  Â  document.body.classList.remove('bg-sunny','bg-rain','bg-cloudy','bg-night');

Â  Â  Â  if(night) document.body.classList.add('bg-night');

Â  Â  Â  else{

Â  Â  Â  Â  if(theme==='rain') document.body.classList.add('bg-rain');

Â  Â  Â  Â  else if(theme==='cloudy') document.body.classList.add('bg-cloudy');

Â  Â  Â  Â  else document.body.classList.add('bg-sunny');

Â  Â  Â  }

Â  Â  }

Â  Â  function spawnClouds(){

Â  Â  Â  cloudsLayer.style.display = 'block';

Â  Â  Â  const layers = [

Â  Â  Â  Â  cloudsLayer.querySelector('.layer-1'),

Â  Â  Â  Â  cloudsLayer.querySelector('.layer-2'),

Â  Â  Â  Â  cloudsLayer.querySelector('.layer-3'),

Â  Â  Â  ];

Â  Â  Â  const counts = [5, 6, 7];

Â  Â  Â  layers.forEach((layer, idx)=>{

Â  Â  Â  Â  for(let i=0;i<counts[idx];i++){

Â  Â  Â  Â  Â  const c = document.createElement('div');

Â  Â  Â  Â  Â  c.className = 'cloud';

Â  Â  Â  Â  Â  const w = 180 + Math.random()*220;

Â  Â  Â  Â  Â  c.style.setProperty('--w', w+'px');

Â  Â  Â  Â  Â  c.style.setProperty('--h', (60 + Math.random()*40)+'px');

Â  Â  Â  Â  Â  c.style.top = (Math.random()*85)+'vh';

Â  Â  Â  Â  Â  c.style.left = (-30 + Math.random()*120)+'vw';

Â  Â  Â  Â  Â  c.style.setProperty('--y', (Math.random()*10-5)+'px');

Â  Â  Â  Â  Â  // vary speed per layer slightly

Â  Â  Â  Â  Â  const base = idx===0?90:(idx===1?70:55);

Â  Â  Â  Â  Â  c.style.setProperty('--speed', (base + Math.random()*20)+'s');

Â  Â  Â  Â  Â  layer.appendChild(c);

Â  Â  Â  Â  }

Â  Â  Â  });

Â  Â  }

Â  Â  function spawnRain(density=110){

Â  Â  Â  rainLayer.style.display = 'block';

Â  Â  Â  rainDropsLayer.style.display = 'block';

Â  Â  Â  const w = window.innerWidth;

Â  Â  Â  for(let i=0;i<density;i++){

Â  Â  Â  Â  const d = document.createElement('div');

Â  Â  Â  Â  d.className = 'raindrop';

Â  Â  Â  Â  d.style.left = Math.random()*w + 'px';

Â  Â  Â  Â  d.style.top = (-100 - Math.random()*400) + 'px';

Â  Â  Â  Â  d.style.height = (40 + Math.random()*80)+'px';

Â  Â  Â  Â  d.style.opacity = (0.3 + Math.random()*0.7).toFixed(2);

Â  Â  Â  Â  d.style.setProperty('--t', (0.9 + Math.random()*0.9) + 's');

Â  Â  Â  Â  rainDropsLayer.appendChild(d);

Â  Â  Â  }

Â  Â  }

Â  Â  function spawnStars(count=140){

Â  Â  Â  starsLayer.style.display = 'block';

Â  Â  Â  const w = window.innerWidth;

Â  Â  Â  const h = window.innerHeight;

Â  Â  Â  for(let i=0;i<count;i++){

Â  Â  Â  Â  const s = document.createElement('div');

Â  Â  Â  Â  s.className = 'star';

Â  Â  Â  Â  const x = Math.random()*w, y=Math.random()*h;

Â  Â  Â  Â  s.style.left = x+'px';

Â  Â  Â  Â  s.style.top = y+'px';

Â  Â  Â  Â  s.style.opacity = (0.4+Math.random()*0.6).toFixed(2);

Â  Â  Â  Â  s.style.setProperty('--tw', (1.6+Math.random()*2.2)+'s');

Â  Â  Â  Â  starsLayer.appendChild(s);

Â  Â  Â  }

Â  Â  }

Â  Â  function updateFX(theme, night=false){

Â  Â  Â  clearLayers();

Â  Â  Â  if(night){

Â  Â  Â  Â  setBodyTheme(theme, true);

Â  Â  Â  Â  spawnStars();

Â  Â  Â  Â  // à¸à¸¥à¸²à¸‡à¸„à¸·à¸™à¸–à¹‰à¸²à¹€à¸¡à¸†à¸¡à¸²à¸/à¸à¸™ à¸à¹‡à¹ƒà¸ªà¹ˆà¹€à¸¡à¸†/à¸à¸™à¸—à¸±à¸šà¹„à¸”à¹‰

Â  Â  Â  Â  if(theme==='cloudy') spawnClouds();

Â  Â  Â  Â  if(theme==='rain') spawnRain();

Â  Â  Â  Â  return;

Â  Â  Â  }

Â  Â  Â  setBodyTheme(theme, false);

Â  Â  Â  if(theme==='sunny'){

Â  Â  Â  Â  // à¹à¸”à¸”à¸­à¸­à¸: à¹ƒà¸ªà¹ˆà¹€à¸¡à¸†à¸šà¸²à¸‡à¹†à¹ƒà¸«à¹‰à¸¡à¸µà¸¡à¸´à¸•à¸´

Â  Â  Â  Â  spawnClouds();

Â  Â  Â  }else if(theme==='cloudy'){

Â  Â  Â  Â  spawnClouds();

Â  Â  Â  }else if(theme==='rain'){

Â  Â  Â  Â  spawnClouds();

Â  Â  Â  Â  spawnRain();

Â  Â  Â  }

Â  Â  }

Â  Â  /* ========== FETCH WEATHER ========== */

Â  Â  async function fetchWeatherData(){

Â  Â  Â  const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

Â  Â  Â  const currentUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

Â  Â  Â  const uvUrl = `https://api.openweathermap.org/data/2.5/uvi?lat=${lat}&lon=${lon}&appid=${API_KEY}`;

Â  Â  Â  try{

Â  Â  Â  Â  const [forecastResponse, currentResponse, uvResponse] = await Promise.all([

Â  Â  Â  Â  Â  fetch(forecastUrl),

Â  Â  Â  Â  Â  fetch(currentUrl),

Â  Â  Â  Â  Â  fetch(uvUrl)

Â  Â  Â  Â  ]);

Â  Â  Â  Â  if(!forecastResponse.ok || !currentResponse.ok){

Â  Â  Â  Â  Â  throw new Error(`HTTP error! status: ${forecastResponse.status} / ${currentResponse.status}`);

Â  Â  Â  Â  }

Â  Â  Â  Â  const forecastData = await forecastResponse.json();

Â  Â  Â  Â  const currentData = await currentResponse.json();

Â  Â  Â  Â  let uvData = { value: '--' };

Â  Â  Â  Â  if(uvResponse.ok){

Â  Â  Â  Â  Â  uvData = await uvResponse.json();

Â  Â  Â  Â  }

Â  Â  Â  Â  displayCurrentWeather(currentData, forecastData, uvData);

Â  Â  Â  Â  displayHourlyForecast(forecastData.list);

Â  Â  Â  Â  displayDailyForecast(forecastData.list);

Â  Â  Â  Â  // === à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸˜à¸µà¸¡à¸•à¸²à¸¡à¸­à¸²à¸à¸²à¸¨ ===

Â  Â  Â  Â  const wId = currentData.weather?.[0]?.id ?? 800;

Â  Â  Â  Â  const night = isNightBySys(currentData.sys);

Â  Â  Â  Â  const theme = classifyWeather(wId);

Â  Â  Â  Â  mainIconEl.textContent = getWeatherIcon(wId);

Â  Â  Â  Â  updateFX(theme, night);

Â  Â  Â  }catch(err){

Â  Â  Â  Â  console.error('Failed to fetch weather data:', err);

Â  Â  Â  }

Â  Â  }

Â  Â  /* ========== RENDER SECTIONS ========== */

Â  Â  function displayCurrentWeather(data, forecastData, uvData){

Â  Â  Â  document.getElementById('temp-value').textContent = `${data.main.temp.toFixed(0)}Â°C`;

Â  Â  Â  document.getElementById('weather-description').textContent = data.weather[0].description;

Â  Â  Â  document.getElementById('humidity-value').textContent = `${data.main.humidity}%`;

Â  Â  Â  document.getElementById('pressure-value').textContent = data.main.pressure;

Â  Â  Â  document.getElementById('wind-speed-value').textContent = data.wind.speed;

Â  Â  Â  document.getElementById('wind-direction-value').textContent = data.wind.deg;

Â  Â  Â  document.getElementById('feels-like-value').textContent = `${data.main.feels_like.toFixed(0)}Â°C`;

Â  Â  Â  document.getElementById('uv-index-value').textContent = uvData.value ?? '--';

Â  Â  Â  document.getElementById('visibility-value').textContent = (data.visibility/1000).toFixed(1);

Â  Â  Â  const sunriseTime = new Date(data.sys.sunrise * 1000)

Â  Â  Â  Â  .toLocaleTimeString('en-US',{hour:'2-digit', minute:'2-digit'});

Â  Â  Â  const sunsetTime = new Date(data.sys.sunset * 1000)

Â  Â  Â  Â  .toLocaleTimeString('en-US',{hour:'2-digit', minute:'2-digit'});

Â  Â  Â  document.getElementById('sunrise-value').textContent = sunriseTime;

Â  Â  Â  document.getElementById('sunset-value').textContent = sunsetTime;

Â  Â  Â  // Today min/max from forecast

Â  Â  Â  const today = new Date().toLocaleDateString('en-US');

Â  Â  Â  const todayForecast = forecastData.list.filter(item=>{

Â  Â  Â  Â  const d = new Date(item.dt*1000).toLocaleDateString('en-US');

Â  Â  Â  Â  return d===today;

Â  Â  Â  });

Â  Â  Â  if(todayForecast.length){

Â  Â  Â  Â  const minTemp = Math.min(...todayForecast.map(i=>i.main.temp_min));

Â  Â  Â  Â  const maxTemp = Math.max(...todayForecast.map(i=>i.main.temp_max));

Â  Â  Â  Â  document.getElementById('temp-max-value').textContent = maxTemp.toFixed(0);

Â  Â  Â  Â  document.getElementById('temp-min-value').textContent = minTemp.toFixed(0);

Â  Â  Â  }

Â  Â  }

Â  Â  function displayDailyForecast(list){

Â  Â  Â  const container = document.getElementById('daily-forecast-container');

Â  Â  Â  container.innerHTML = '';

Â  Â  Â  const dailyMap = new Map();

Â  Â  Â  list.forEach(item=>{

Â  Â  Â  Â  const dateStr = new Date(item.dt*1000).toLocaleDateString('en-US');

Â  Â  Â  Â  if(!dailyMap.has(dateStr)){

Â  Â  Â  Â  Â  dailyMap.set(dateStr, {

Â  Â  Â  Â  Â  Â  temp_min: item.main.temp_min,

Â  Â  Â  Â  Â  Â  temp_max: item.main.temp_max,

Â  Â  Â  Â  Â  Â  weather_id: item.weather[0].id,

Â  Â  Â  Â  Â  Â  dt: item.dt

Â  Â  Â  Â  Â  });

Â  Â  Â  Â  }else{

Â  Â  Â  Â  Â  const d = dailyMap.get(dateStr);

Â  Â  Â  Â  Â  d.temp_min = Math.min(d.temp_min, item.main.temp_min);

Â  Â  Â  Â  Â  d.temp_max = Math.max(d.temp_max, item.main.temp_max);

Â  Â  Â  Â  }

Â  Â  Â  });

Â  Â  Â  Array.from(dailyMap.values()).slice(0,7).forEach((day, idx)=>{

Â  Â  Â  Â  const date = new Date(day.dt*1000);

Â  Â  Â  Â  const dayName = idx===0 ? 'Today' : new Intl.DateTimeFormat('en-US', { weekday:'long'}).format(date);

Â  Â  Â  Â  const icon = getWeatherIcon(day.weather_id);

Â  Â  Â  Â  const tempMin = day.temp_min.toFixed(0);

Â  Â  Â  Â  const tempMax = day.temp_max.toFixed(0);

Â  Â  Â  Â  const item = document.createElement('div');

Â  Â  Â  Â  item.className = 'flex items-center justify-between p-2 rounded-xl card';

Â  Â  Â  Â  item.innerHTML = `

Â  Â  Â  Â  Â  <span class="text-sm font-light w-1/4">${dayName}</span>

Â  Â  Â  Â  Â  <span class="text-xl w-1/4 text-center icon-glow">${icon}</span>

Â  Â  Â  Â  Â  <span class="text-sm w-1/4 text-right">${tempMin}Â°C</span>

Â  Â  Â  Â  Â  <span class="text-sm w-1/4 text-right">${tempMax}Â°C</span>

Â  Â  Â  Â  `;

Â  Â  Â  Â  container.appendChild(item);

Â  Â  Â  });

Â  Â  }

Â  Â  function displayHourlyForecast(list){

Â  Â  Â  const container = document.getElementById('hourly-forecast-container');

Â  Â  Â  container.innerHTML = '';

Â  Â  Â  list.slice(0, 12).forEach(hour=>{

Â  Â  Â  Â  const d = new Date(hour.dt*1000);

Â  Â  Â  Â  const t = d.getHours().toString().padStart(2,'0') + ':00';

Â  Â  Â  Â  const icon = getWeatherIcon(hour.weather[0].id);

Â  Â  Â  Â  const temp = hour.main.temp.toFixed(0);

Â  Â  Â  Â  const wrap = document.createElement('div');

Â  Â  Â  Â  wrap.className = 'flex flex-col items-center flex-shrink-0 card p-3 min-w-[86px]';

Â  Â  Â  Â  wrap.innerHTML = `

Â  Â  Â  Â  Â  <p class="text-sm">${t}</p>

Â  Â  Â  Â  Â  <span class="text-2xl mt-2 icon-glow">${icon}</span>

Â  Â  Â  Â  Â  <p class="text-sm font-light mt-2">${temp}Â°C</p>

Â  Â  Â  Â  `;

Â  Â  Â  Â  container.appendChild(wrap);

Â  Â  Â  });

Â  Â  }

Â  Â  /* ========== INIT ========== */

Â  Â  window.addEventListener('resize', () => {

Â  Â  Â  // à¸–à¹‰à¸²à¸•à¹‰à¸­à¸‡à¸à¸²à¸£: regenerate stars/rain for new size

Â  Â  });

Â  Â  fetchWeatherData();

Â  Â  // à¹€à¸à¸´à¹ˆà¸¡à¸šà¸£à¸£à¸—à¸±à¸”à¸™à¸µà¹‰à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸¸à¸à¹† 1 à¸™à¸²à¸—à¸µ (60000ms)

Â  Â  setInterval(fetchWeatherData, 60000);

Â  </script>

</body>

</html>

